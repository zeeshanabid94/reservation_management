(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,function(e,t,a){},,function(e,t,a){e.exports=a(34)},,,,,function(e,t,a){},,function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(12),s=a.n(l),r=(a(18),a(2)),i=a(3),c=a(5),d=a(4),u=a(6),h=(a(20),a(11),a(1)),m=a(8),b=a.n(m),y=(a(23),a(25),a(27),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={currentState:e.defaultValue},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{class:"text_input"},o.a.createElement("label",{class:"text_input_label"},this.props.labelValue),o.a.createElement("input",{type:"text",class:"text_input_textbox",name:this.props.key,onChange:this.props.onChange}))}}]),t}(o.a.Component)),f=function(e){function t(e){return Object(r.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("button",{class:"button",id:this.props.key,onClick:this.props.onSubmit},this.props.labelValue)}}]),t}(o.a.Component),v=(a(29),function(e){function t(e){return Object(r.a)(this,t),Object(c.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return console.log("Modal State",this.state),console.log("Modal Props",this.props),o.a.createElement("div",{class:!0===this.props.show?"modal_box modal_open":"modal_box modal_closed"},o.a.createElement("div",{class:"modal"},o.a.createElement("div",{class:"close_icon",onClick:this.props.onClose},"X"),o.a.createElement("h2",{class:"modal_heading"},this.props.heading),o.a.createElement("form",null,o.a.createElement("div",{class:"modal_content"},this.props.children))))}}]),t}(o.a.Component)),g=a(7),p=["Jan","Feb","Apr","Mar","May","Jun","July","Aug","Sep","Oct","Nov","Dec"],_=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],E=function(e){function t(e){var a;Object(r.a)(this,t),a=Object(c.a)(this,Object(d.a)(t).call(this,e));for(var n=b()(),o=b()(n).subtract(3,"days"),l=[],s=0;s<e.length;s++){for(var i=[],u=0;u<e.width;u++)console.log(o.toString()),i.push(b()(o)),o=o.add(1,"day");l.push(i)}return a.onClickDay=a.onClickDay.bind(Object(h.a)(Object(h.a)(a))),a.onReserve=a.onReserve.bind(Object(h.a)(Object(h.a)(a))),a.onFullNameFieldChange=a.onFullNameFieldChange.bind(Object(h.a)(Object(h.a)(a))),a.onEmailFieldChange=a.onEmailFieldChange.bind(Object(h.a)(Object(h.a)(a))),a.onSubmit=a.onSubmit.bind(Object(h.a)(Object(h.a)(a))),a.onCloseModal=a.onCloseModal.bind(Object(h.a)(Object(h.a)(a))),a.state={current:n,grid_length:e.length,grid_width:e.width,grid:l,start_day:null,end_day:null,csrf:e.cookies.get("csrftoken"),modalShow:!1,fullname:null,email:null},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state;fetch("/reservations/.json").then(function(e){return console.log(e.statusText),console.log(e.status),e.json()}).then(function(a){for(var n=[],o=a,l=0;l<o.length;l++)n.push([b.a.unix(o[l].start_date),b.a.unix(o[l].end_date)]);console.log("RESERVATIONS",n),t.reservations=n,e.setState(t)}).catch(function(e){console.log(e.toString()),console.log("AN error occurred while fetching data.")})}},{key:"onCloseModal",value:function(){console.log("Close Modal");var e=this.state;e.modalShow=!1,this.setState(e)}},{key:"onFullNameFieldChange",value:function(e){var t=this.state;t.fullname=e.target.value.toLowerCase(),this.setState(t)}},{key:"onEmailFieldChange",value:function(e){var t=this.state;console.log(e.target.value),t.email=e.target.value.toLowerCase(),this.setState(t)}},{key:"onSubmit",value:function(){console.log("Submitted");var e={fullname:this.state.fullname,email:this.state.email,start_date:this.state.start_day.unix(),end_date:this.state.end_day.unix()};console.log("Payload",e);var t={"Content-Type":"application/json",Accept:"application/json","X-CSRFToken":this.state.csrf};fetch("/reservations/",{method:"POST",body:JSON.stringify(e),headers:t}).then(function(e){return console.log(e.status),console.log(e.statusText),console.log(e.json()),e}).catch(function(e){console.log(e.toString()),console.log("Unable to reserve")})}},{key:"onReserve",value:function(){if(console.log("Reserving",this.state.start_day.toString(),this.state.end_day.toString()),null===this.state.start_day)console.log("Start date is null.");else if(null===this.state.end_day)console.log("End date is null");else{var e=this.state;e.modalShow=!0,this.setState(e)}}},{key:"onClickDay",value:function(e){console.log("PRESSED",e.toString());var t=this.state;if(null!=t.start_day&&null!=t.end_day)t.start_day=e,t.end_day=null;else if(null==t.start_day)t.start_day=e;else if(t.start_day.isBefore(e,"day")){t.end_day=e;for(var a=0;a<this.state.reservations.length;a++){var n=this.state.reservations[a];if(t.start_day.isSameOrBefore(n[0],"day")&&t.end_day.isSameOrAfter(n[1],"day")){t.start_day=e,t.end_day=null;break}}}else t.start_day=e;this.setState(t),console.log(t)}},{key:"render",value:function(){var e=this;console.log("Render State",this.state);for(var t=!1,a=function(a,n){for(var l=[],s=function(n){var o=!1;a[n].isBefore(b()(),"day")&&(o=!0);var s=!1;if(e.state.reservations)for(var r=0;r<e.state.reservations.length;r++)if(a[n].isSameOrAfter(e.state.reservations[r][0],"day")&&a[n].isSameOrBefore(e.state.reservations[r][1],"day")){console.log("TAKEN",a[n].toString()),s=!0;break}e.state.start_day&&e.state.start_day.isSame(a[n],"day")&&(t=!0),l.push(O(a[n].date(),a[n].month(),a[n].day(),o,s,t,function(){return e.onClickDay(a[n])})),null==e.state.end_day?t=!1:e.state.end_day&&e.state.end_day.isSame(a[n],"day")&&(t=!1)},r=0;r<a.length;r++)s(r);return o.a.createElement("tr",null,l)},n=[],l=0;l<this.state.grid.length;l++)n.push(a(this.state.grid[l]));var s=[o.a.createElement(y,{key:"name",defaultValue:"Enter your name here.",labelValue:"Full Name",onChange:this.onFullNameFieldChange}),o.a.createElement(y,{key:"email",defaultValue:"Enter your name here.",labelValue:"Email",onChange:this.onEmailFieldChange}),o.a.createElement(f,{key:"confirm",labelValue:"Confirm",onSubmit:this.onSubmit})],r=o.a.createElement(v,{onClose:this.onCloseModal,show:this.state.modalShow,children:s,heading:"Reservation Confirmation"});return console.log(r),o.a.createElement("div",{id:"calendar_app"},r,o.a.createElement("h1",null,"Calendar"),o.a.createElement("div",{class:"calendar"},o.a.createElement("h2",{class:"year"},"2018"),o.a.createElement("div",{class:"dates"},o.a.createElement("table",{class:"dates_table"},n)),o.a.createElement("button",{class:"reserve_button",onClick:this.onReserve},"Reserve")))}}]),t}(o.a.Component),O=function(e,t,a,n,l,s,r){return!0===n?o.a.createElement("td",{class:"date_entry border_bottom border_right locked"},o.a.createElement("div",{class:"date"},e," ",p[t]),o.a.createElement("div",{class:"day"},_[a])):!0===l?o.a.createElement("td",{class:"date_entry border_bottom border_right reserved"},o.a.createElement("div",{class:"date"},e," ",p[t]),o.a.createElement("div",{class:"day"},_[a])):!0===s?o.a.createElement("td",{class:"date_entry border_bottom border_right selected"},o.a.createElement("div",{class:"date"},e," ",p[t]),o.a.createElement("div",{class:"day"},_[a])):o.a.createElement("td",{class:"date_entry border_bottom border_right",onClick:r},o.a.createElement("div",{class:"date"},e," ",p[t]),o.a.createElement("div",{class:"day"},_[a]))},j=Object(g.b)(E),S=function(e){function t(e){var a;Object(r.a)(this,t),a=Object(c.a)(this,Object(d.a)(t).call(this,e));var n=e.cookies;return a.state={csrftoken:n.get("csrftoken")},console.log(n),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement(g.a,null,o.a.createElement("div",{className:"App"},o.a.createElement(j,{length:6,width:7})))}}]),t}(n.Component),C=Object(g.b)(S);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(g.a,null,o.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[13,2,1]]]);
//# sourceMappingURL=main.27372f7b.chunk.js.map